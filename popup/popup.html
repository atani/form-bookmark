<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Form Bookmark</title>
  <link rel="stylesheet" href="../styles.css">
</head>
<body>
  <div class="container">
    <header class="header">
      <h1 data-i18n="headerTitle"></h1>
      <p class="current-url" id="currentUrl"></p>
    </header>

    <section class="actions">
      <button id="saveBtn" class="btn btn-primary" data-i18n="saveCurrentForm"></button>
    </section>

    <section class="bookmarks-section">
      <div class="section-header">
        <h2 data-i18n="savedBookmarks"></h2>
      </div>
      <div id="bookmarksList" class="bookmarks-list">
        <p class="empty-message" data-i18n="noBookmarks"></p>
      </div>
    </section>

    <section class="settings">
      <label class="toggle-setting">
        <span class="toggle-label" data-i18n="showAllBookmarks"></span>
        <input type="checkbox" id="showAllBookmarks" />
        <span class="toggle-slider"></span>
      </label>
      <label class="toggle-setting">
        <span class="toggle-label" data-i18n="includePasswords"></span>
        <input type="checkbox" id="includePasswords" />
        <span class="toggle-slider"></span>
      </label>
      <label class="toggle-setting">
        <span class="toggle-label" data-i18n="autoRestore"></span>
        <input type="checkbox" id="autoRestore" />
        <span class="toggle-slider"></span>
      </label>
      <details class="advanced-settings">
        <summary data-i18n="advancedSettings"></summary>
        <div class="advanced-settings-content">
          <button id="manageEnvGroupsBtn" class="btn btn-small btn-secondary btn-full-width" data-i18n="manageEnvGroups"></button>
          <div class="export-import-actions">
            <button id="exportBtn" class="btn btn-small btn-secondary" data-i18n="export"></button>
            <button id="importBtn" class="btn btn-small btn-secondary" data-i18n="import"></button>
            <input type="file" id="importFile" accept=".json" style="display: none;" />
          </div>
        </div>
      </details>
    </section>
  </div>

  <!-- Save Dialog -->
  <div id="saveDialog" class="dialog-overlay hidden">
    <div class="dialog">
      <h3 data-i18n="saveBookmarkTitle"></h3>
      <input type="text" id="bookmarkName" data-i18n-placeholder="bookmarkNamePlaceholder" />
      <div class="dialog-actions">
        <button id="cancelSave" class="btn btn-secondary" data-i18n="cancel"></button>
        <button id="confirmSave" class="btn btn-primary" data-i18n="save"></button>
      </div>
    </div>
  </div>

  <!-- Edit Dialog -->
  <div id="editDialog" class="dialog-overlay hidden">
    <div class="dialog">
      <h3 data-i18n="editBookmarkTitle"></h3>
      <input type="text" id="editBookmarkName" data-i18n-placeholder="bookmarkNamePlaceholder" />
      <div class="dialog-actions">
        <button id="cancelEdit" class="btn btn-secondary" data-i18n="cancel"></button>
        <button id="confirmEdit" class="btn btn-primary" data-i18n="update"></button>
      </div>
    </div>
  </div>

  <!-- Delete Confirmation Dialog -->
  <div id="deleteDialog" class="dialog-overlay hidden">
    <div class="dialog">
      <h3 data-i18n="deleteConfirmTitle"></h3>
      <p id="deleteMessage"></p>
      <div class="dialog-actions">
        <button id="cancelDelete" class="btn btn-secondary" data-i18n="cancel"></button>
        <button id="confirmDelete" class="btn btn-danger" data-i18n="delete"></button>
      </div>
    </div>
  </div>

  <!-- Environment Groups Dialog -->
  <div id="envGroupsDialog" class="dialog-overlay hidden">
    <div class="dialog dialog-wide">
      <h3 data-i18n="manageEnvGroupsTitle"></h3>
      <div id="envGroupsList" class="env-groups-list"></div>
      <button id="addEnvGroupBtn" class="btn btn-small btn-secondary btn-full-width" data-i18n="addEnvGroup"></button>
      <div class="dialog-actions">
        <button id="closeEnvGroups" class="btn btn-secondary" data-i18n="close"></button>
      </div>
    </div>
  </div>

  <!-- Environment Group Edit Dialog -->
  <div id="envGroupEditDialog" class="dialog-overlay hidden">
    <div class="dialog dialog-wide">
      <h3 id="envGroupEditTitle" data-i18n="addEnvGroupTitle"></h3>
      <input type="text" id="envGroupName" data-i18n-placeholder="envGroupNamePlaceholder" />
      <div class="env-patterns-section">
        <label data-i18n="envGroupPatterns"></label>
        <div id="envPatternsList" class="env-patterns-list"></div>
        <div class="env-pattern-add">
          <input type="text" id="newEnvPattern" data-i18n-placeholder="envPatternPlaceholder" />
          <button id="addEnvPatternBtn" class="btn btn-small btn-secondary">+</button>
          <button id="addCurrentUrlBtn" class="btn btn-small btn-accent" data-i18n-title="addCurrentUrlTitle">üìç</button>
        </div>
      </div>
      <div class="dialog-actions">
        <button id="cancelEnvGroupEdit" class="btn btn-secondary" data-i18n="cancel"></button>
        <button id="confirmEnvGroupEdit" class="btn btn-primary" data-i18n="save"></button>
      </div>
    </div>
  </div>

  <!-- Toast Notification -->
  <div id="toast" class="toast hidden"></div>

  <script src="popup.js"></script>
</body>
</html>
